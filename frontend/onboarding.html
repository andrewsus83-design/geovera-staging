<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to GeoVera - Onboarding</title>
    <style>
        /* WIRED Newsletter Design System */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #F9FAFB;
            padding: 24px;
            min-height: 100vh;
        }

        /* Main Container */
        .wizard-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border: 4px solid #0B0F19;
            border-radius: 0; /* Sharp corners - WIRED style */
            padding: 0;
        }

        /* Header */
        .wizard-header {
            background: #0B0F19;
            color: white;
            padding: 32px;
            border-bottom: 4px solid #16A34A;
        }

        .wizard-header h1 {
            font-family: Georgia, serif;
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .wizard-header p {
            font-size: 16px;
            color: #D1D5DB;
        }

        /* Progress Bar */
        .progress-bar {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 32px;
            background: #F9FAFB;
            border-bottom: 2px solid #E5E7EB;
        }

        .progress-step {
            width: 48px;
            height: 48px;
            border: 4px solid #E5E7EB;
            border-radius: 0; /* Sharp corners */
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 18px;
            color: #6B7280;
            background: white;
            transition: all 0.3s ease;
        }

        .progress-step.active {
            background: #16A34A;
            border-color: #16A34A;
            color: white;
        }

        .progress-step.completed {
            background: #0B0F19;
            border-color: #0B0F19;
            color: white;
        }

        .progress-line {
            width: 60px;
            height: 4px;
            background: #E5E7EB;
            transition: background 0.3s ease;
        }

        .progress-line.completed {
            background: #16A34A;
        }

        /* Step Content */
        .wizard-body {
            padding: 48px;
        }

        .step {
            display: none;
        }

        .step.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step h2 {
            font-family: Georgia, serif;
            font-size: 28px;
            color: #0B0F19;
            margin-bottom: 8px;
        }

        .step-description {
            color: #6B7280;
            font-size: 16px;
            margin-bottom: 32px;
        }

        /* Form Fields */
        .field {
            margin-bottom: 24px;
        }

        .field label {
            display: block;
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 8px;
            color: #0B0F19;
        }

        .field input[type="text"],
        .field input[type="url"],
        .field input[type="email"],
        .field select {
            width: 100%;
            padding: 14px;
            border: 3px solid #E5E7EB;
            border-radius: 0; /* Sharp corners */
            font-size: 16px;
            font-family: 'Inter', sans-serif;
            transition: border-color 0.2s ease;
        }

        .field input:focus,
        .field select:focus {
            outline: none;
            border-color: #16A34A;
        }

        .field input.error {
            border-color: #DC2626;
        }

        .error-message {
            color: #DC2626;
            font-size: 14px;
            margin-top: 6px;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        /* File Upload */
        .file-upload {
            border: 3px dashed #E5E7EB;
            border-radius: 0;
            padding: 32px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .file-upload:hover {
            border-color: #16A34A;
            background: #F0FDF4;
        }

        .file-upload input[type="file"] {
            display: none;
        }

        .file-upload-text {
            color: #6B7280;
            font-size: 14px;
        }

        .file-preview {
            margin-top: 16px;
            display: none;
        }

        .file-preview img {
            max-width: 200px;
            border: 3px solid #E5E7EB;
        }

        /* Checkboxes */
        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            padding: 16px;
            border: 3px solid #E5E7EB;
            border-radius: 0;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .checkbox-label:hover {
            border-color: #16A34A;
            background: #F0FDF4;
        }

        .checkbox-label input[type="checkbox"] {
            width: 24px;
            height: 24px;
            margin-right: 12px;
            cursor: pointer;
            accent-color: #16A34A;
        }

        .checkbox-label span {
            font-size: 16px;
            font-weight: 500;
        }

        /* Category Grid */
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }

        .category-btn {
            padding: 20px;
            border: 3px solid #E5E7EB;
            border-radius: 0;
            background: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
        }

        .category-btn:hover {
            border-color: #16A34A;
            background: #F0FDF4;
        }

        .category-btn.selected {
            background: #16A34A;
            border-color: #16A34A;
            color: white;
        }

        /* Pricing Cards */
        .pricing-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .pricing-card {
            border: 3px solid #E5E7EB;
            border-radius: 0;
            padding: 32px;
            background: white;
            transition: all 0.3s ease;
            position: relative;
        }

        .pricing-card:hover {
            border-color: #16A34A;
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
        }

        .pricing-card.featured {
            border-color: #16A34A;
            border-width: 4px;
        }

        .pricing-card.featured::before {
            content: "POPULAR";
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: #16A34A;
            color: white;
            padding: 4px 16px;
            font-size: 12px;
            font-weight: 700;
            letter-spacing: 0.05em;
        }

        .pricing-card h3 {
            font-family: Georgia, serif;
            font-size: 24px;
            margin-bottom: 8px;
        }

        .pricing-card .price {
            font-size: 32px;
            font-weight: 700;
            color: #16A34A;
            margin-bottom: 24px;
        }

        .pricing-card ul {
            list-style: none;
            margin-bottom: 24px;
        }

        .pricing-card li {
            padding: 8px 0;
            color: #4B5563;
            font-size: 14px;
            border-bottom: 1px solid #F3F4F6;
        }

        .pricing-card li:last-child {
            border-bottom: none;
        }

        .pricing-card button {
            width: 100%;
            padding: 14px;
            background: #0B0F19;
            color: white;
            border: none;
            border-radius: 0;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            transition: all 0.2s ease;
        }

        .pricing-card button:hover {
            background: #16A34A;
        }

        .pricing-card.featured button {
            background: #16A34A;
        }

        .pricing-card.featured button:hover {
            background: #15803d;
        }

        /* Navigation Buttons */
        .wizard-nav {
            display: flex;
            justify-content: space-between;
            gap: 16px;
            padding: 32px 48px;
            background: #F9FAFB;
            border-top: 2px solid #E5E7EB;
        }

        .wizard-nav button {
            flex: 1;
            padding: 16px 32px;
            border: 3px solid #0B0F19;
            border-radius: 0;
            background: white;
            color: #0B0F19;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .wizard-nav button:hover {
            background: #0B0F19;
            color: white;
        }

        .wizard-nav button.primary {
            background: #16A34A;
            border-color: #16A34A;
            color: white;
        }

        .wizard-nav button.primary:hover {
            background: #15803d;
        }

        .wizard-nav button:disabled {
            background: #E5E7EB;
            border-color: #E5E7EB;
            color: #9CA3AF;
            cursor: not-allowed;
        }

        .wizard-nav button.skip {
            flex: 0.5;
            background: transparent;
            border: none;
            color: #6B7280;
            text-decoration: underline;
        }

        .wizard-nav button.skip:hover {
            background: transparent;
            color: #0B0F19;
        }

        /* Success Message */
        .success-screen {
            display: none;
            text-align: center;
            padding: 64px 32px;
        }

        .success-screen.show {
            display: block;
        }

        .success-icon {
            width: 80px;
            height: 80px;
            background: #16A34A;
            border-radius: 50%;
            margin: 0 auto 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: white;
        }

        .success-screen h2 {
            font-family: Georgia, serif;
            font-size: 32px;
            margin-bottom: 16px;
        }

        .success-screen p {
            color: #6B7280;
            font-size: 18px;
            margin-bottom: 32px;
        }

        /* Loading Spinner */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .wizard-header h1 {
                font-size: 28px;
            }

            .wizard-body {
                padding: 32px 24px;
            }

            .wizard-nav {
                padding: 24px;
                flex-direction: column;
            }

            .category-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .pricing-cards {
                grid-template-columns: 1fr;
            }

            .progress-line {
                width: 30px;
            }
        }

        /* Screen Reader Only */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0,0,0,0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Skip Link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: #16A34A;
            color: white;
            padding: 12px 24px;
            text-decoration: none;
            font-weight: 600;
            z-index: 100;
            border: 3px solid #0B0F19;
        }

        .skip-link:focus {
            top: 0;
        }

        /* Required Indicator */
        .required {
            color: #DC2626;
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <main class="wizard-container" id="main-content" role="main">
        <!-- Header -->
        <div class="wizard-header">
            <h1>Welcome to GeoVera</h1>
            <p>Let's set up your account in 5 simple steps</p>
        </div>

        <!-- Progress Bar -->
        <div class="progress-bar" role="progressbar" aria-valuenow="1" aria-valuemin="1" aria-valuemax="5" aria-label="Onboarding progress: step 1 of 5">
            <div class="progress-step active" id="progress-1" aria-current="step">
                <span class="step-number">1</span>
                <span class="sr-only">Brand Setup</span>
            </div>
            <div class="progress-line" id="line-1" aria-hidden="true"></div>
            <div class="progress-step" id="progress-2">
                <span class="step-number">2</span>
                <span class="sr-only">Goals Selection</span>
            </div>
            <div class="progress-line" id="line-2" aria-hidden="true"></div>
            <div class="progress-step" id="progress-3">
                <span class="step-number">3</span>
                <span class="sr-only">Content Preferences</span>
            </div>
            <div class="progress-line" id="line-3" aria-hidden="true"></div>
            <div class="progress-step" id="progress-4">
                <span class="step-number">4</span>
                <span class="sr-only">Location & Timezone</span>
            </div>
            <div class="progress-line" id="line-4" aria-hidden="true"></div>
            <div class="progress-step" id="progress-5">
                <span class="step-number">5</span>
                <span class="sr-only">Choose Your Plan</span>
            </div>
        </div>

        <!-- Wizard Body -->
        <div class="wizard-body">
            <!-- Step 1: Brand Setup -->
            <div class="step active" id="step1" role="region" aria-labelledby="step1-title">
                <h2 id="step1-title">Tell us about your brand</h2>
                <p class="step-description">Help us understand your business so we can personalize your experience</p>

                <div class="field">
                    <label for="brandName">Brand Name <span class="required" aria-label="required">*</span></label>
                    <input
                        type="text"
                        id="brandName"
                        name="brandName"
                        placeholder="e.g., Nike, Shopee, Starbucks"
                        required
                        aria-required="true"
                        aria-invalid="false"
                        aria-describedby="brandName-error"
                    >
                    <div class="error-message" id="brandName-error" role="alert" aria-live="assertive"></div>
                </div>

                <div class="field">
                    <label for="industry">Industry <span class="required" aria-label="required">*</span></label>
                    <select
                        id="industry"
                        name="industry"
                        required
                        aria-required="true"
                        aria-invalid="false"
                        aria-describedby="industry-error"
                    >
                        <option value="">Select your industry</option>
                        <option value="beauty">Beauty & Cosmetics</option>
                        <option value="fashion">Fashion & Apparel</option>
                        <option value="travel">Travel & Tourism</option>
                        <option value="food">Food & Beverage</option>
                        <option value="tech">Technology & SaaS</option>
                        <option value="fitness">Fitness & Wellness</option>
                        <option value="lifestyle">Lifestyle</option>
                        <option value="gaming">Gaming & Entertainment</option>
                        <option value="ecommerce">E-Commerce</option>
                        <option value="finance">Finance & Banking</option>
                        <option value="education">Education</option>
                        <option value="health">Healthcare</option>
                        <option value="realestate">Real Estate</option>
                        <option value="automotive">Automotive</option>
                        <option value="agency">Marketing Agency</option>
                        <option value="other">Other</option>
                    </select>
                    <div class="error-message" id="industry-error" role="alert" aria-live="assertive"></div>
                </div>

                <div class="field">
                    <label for="website">Website URL <span class="sr-only">(optional)</span></label>
                    <input
                        type="url"
                        id="website"
                        name="website"
                        placeholder="https://yourbrand.com"
                        aria-describedby="website-help"
                    >
                    <p id="website-help" class="error-message" style="color: #6B7280; display: block;">We'll use this to learn about your brand</p>
                </div>

                <div class="field">
                    <label for="logoUpload">Brand Logo <span class="sr-only">(optional)</span></label>
                    <div class="file-upload" onclick="document.getElementById('logoUpload').click()" role="button" tabindex="0" aria-label="Upload brand logo">
                        <input
                            type="file"
                            id="logoUpload"
                            name="logoUpload"
                            accept="image/*"
                            aria-describedby="logo-help"
                        >
                        <div class="file-upload-text">
                            <svg width="48" height="48" fill="none" stroke="#6B7280" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin: 0 auto 12px; display: block;">
                                <path d="M21 15v4a2 2 0 0 0 2 2h4m-6-6v-2a2 2 0 0 1 2-2h2m-4 6h10a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H13a2 2 0 0 1-2-2v-6a2 2 0 0 1 2-2zm10-8v2m0 0v2m0-2h2m-2 0h-2"/>
                            </svg>
                            <p id="logo-help"><strong>Click to upload</strong> or drag and drop</p>
                            <p style="font-size: 12px; margin-top: 8px;">PNG, JPG up to 5MB</p>
                        </div>
                        <div class="file-preview" id="logoPreview"></div>
                    </div>
                </div>
            </div>

            <!-- Step 2: Goals Selection -->
            <div class="step" id="step2" role="region" aria-labelledby="step2-title">
                <h2 id="step2-title">What are your goals?</h2>
                <p class="step-description" id="step2-desc">Select all that apply - this helps us customize your dashboard</p>

                <fieldset class="checkbox-group" aria-describedby="step2-desc">
                    <legend class="sr-only">Marketing goals</legend>
                    <label class="checkbox-label">
                        <input type="checkbox" name="goals" value="awareness" id="goal-awareness" aria-label="Increase brand awareness">
                        <span>Increase brand awareness</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" name="goals" value="sales" id="goal-sales" aria-label="Drive sales and conversions">
                        <span>Drive sales & conversions</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" name="goals" value="engagement" id="goal-engagement" aria-label="Boost social media engagement">
                        <span>Boost social media engagement</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" name="goals" value="creators" id="goal-creators" aria-label="Find and collaborate with creators">
                        <span>Find & collaborate with creators</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" name="goals" value="competitors" id="goal-competitors" aria-label="Track competitors and industry trends">
                        <span>Track competitors & industry trends</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" name="goals" value="content" id="goal-content" aria-label="Generate AI-powered content">
                        <span>Generate AI-powered content</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" name="goals" value="analytics" id="goal-analytics" aria-label="Get performance analytics and insights">
                        <span>Get performance analytics & insights</span>
                    </label>
                </fieldset>
            </div>

            <!-- Step 3: Content Preferences -->
            <div class="step" id="step3" role="region" aria-labelledby="step3-title">
                <h2 id="step3-title">What content interests you?</h2>
                <p class="step-description">We'll show you relevant creators and trending content in these categories</p>

                <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 16px;">Content Categories</h3>
                <div class="category-grid" role="group" aria-label="Content categories">
                    <button class="category-btn" data-category="beauty" type="button" aria-pressed="false" aria-label="Select beauty category">Beauty</button>
                    <button class="category-btn" data-category="fashion" type="button" aria-pressed="false" aria-label="Select fashion category">Fashion</button>
                    <button class="category-btn" data-category="travel" type="button" aria-pressed="false" aria-label="Select travel category">Travel</button>
                    <button class="category-btn" data-category="food" type="button" aria-pressed="false" aria-label="Select food category">Food</button>
                    <button class="category-btn" data-category="tech" type="button" aria-pressed="false" aria-label="Select tech category">Tech</button>
                    <button class="category-btn" data-category="fitness" type="button" aria-pressed="false" aria-label="Select fitness category">Fitness</button>
                    <button class="category-btn" data-category="lifestyle" type="button" aria-pressed="false" aria-label="Select lifestyle category">Lifestyle</button>
                    <button class="category-btn" data-category="gaming" type="button" aria-pressed="false" aria-label="Select gaming category">Gaming</button>
                </div>

                <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 16px; margin-top: 32px;">Platform Preferences</h3>
                <fieldset class="checkbox-group" aria-label="Content platforms">
                    <legend class="sr-only">Content platforms</legend>
                    <label class="checkbox-label">
                        <input type="checkbox" name="platforms" value="instagram" id="platform-instagram" checked aria-label="Instagram posts and reels">
                        <span>Instagram posts & reels</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" name="platforms" value="tiktok" id="platform-tiktok" checked aria-label="TikTok videos">
                        <span>TikTok videos</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" name="platforms" value="youtube" id="platform-youtube" checked aria-label="YouTube videos">
                        <span>YouTube videos</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" name="platforms" value="blog" id="platform-blog" aria-label="Blog articles and SEO content">
                        <span>Blog articles & SEO content</span>
                    </label>
                </fieldset>
            </div>

            <!-- Step 4: Location & Timezone -->
            <div class="step" id="step4" role="region" aria-labelledby="step4-title">
                <h2 id="step4-title">Where are you based?</h2>
                <p class="step-description">This helps us show relevant creators and optimize content timing</p>

                <div class="field">
                    <label for="country">Country <span class="required" aria-label="required">*</span></label>
                    <select
                        id="country"
                        name="country"
                        required
                        aria-required="true"
                        aria-invalid="false"
                        aria-describedby="country-error"
                    >
                        <option value="">Select your country</option>
                        <option value="US">United States</option>
                        <option value="GB">United Kingdom</option>
                        <option value="AU">Australia</option>
                        <option value="SG">Singapore</option>
                        <option value="ID">Indonesia</option>
                        <option value="MY">Malaysia</option>
                        <option value="TH">Thailand</option>
                        <option value="PH">Philippines</option>
                        <option value="VN">Vietnam</option>
                        <option value="JP">Japan</option>
                        <option value="KR">South Korea</option>
                        <option value="CN">China</option>
                        <option value="IN">India</option>
                        <option value="AE">United Arab Emirates</option>
                        <option value="SA">Saudi Arabia</option>
                        <option value="CA">Canada</option>
                        <option value="MX">Mexico</option>
                        <option value="BR">Brazil</option>
                        <option value="AR">Argentina</option>
                        <option value="CL">Chile</option>
                        <option value="DE">Germany</option>
                        <option value="FR">France</option>
                        <option value="ES">Spain</option>
                        <option value="IT">Italy</option>
                        <option value="NL">Netherlands</option>
                        <option value="SE">Sweden</option>
                        <option value="NO">Norway</option>
                        <option value="DK">Denmark</option>
                        <option value="FI">Finland</option>
                        <option value="PL">Poland</option>
                        <option value="RU">Russia</option>
                        <option value="TR">Turkey</option>
                        <option value="ZA">South Africa</option>
                        <option value="NG">Nigeria</option>
                        <option value="KE">Kenya</option>
                        <option value="EG">Egypt</option>
                        <option value="NZ">New Zealand</option>
                        <option value="HK">Hong Kong</option>
                        <option value="TW">Taiwan</option>
                        <option value="BD">Bangladesh</option>
                        <option value="PK">Pakistan</option>
                        <option value="LK">Sri Lanka</option>
                        <option value="MM">Myanmar</option>
                        <option value="KH">Cambodia</option>
                        <option value="LA">Laos</option>
                        <option value="BN">Brunei</option>
                        <option value="IL">Israel</option>
                        <option value="JO">Jordan</option>
                        <option value="LB">Lebanon</option>
                        <option value="KW">Kuwait</option>
                        <option value="QA">Qatar</option>
                        <option value="BH">Bahrain</option>
                        <option value="OM">Oman</option>
                    </select>
                    <div class="error-message" id="country-error" role="alert" aria-live="assertive"></div>
                </div>

                <div class="field">
                    <label for="timezone">Timezone <span class="required" aria-label="required">*</span></label>
                    <select
                        id="timezone"
                        name="timezone"
                        required
                        aria-required="true"
                        aria-invalid="false"
                        aria-describedby="timezone-help"
                    >
                        <option value="">Select your timezone</option>
                        <optgroup label="Americas">
                            <option value="America/Los_Angeles">Pacific Time (PT) - Los Angeles</option>
                            <option value="America/Denver">Mountain Time (MT) - Denver</option>
                            <option value="America/Chicago">Central Time (CT) - Chicago</option>
                            <option value="America/New_York">Eastern Time (ET) - New York</option>
                            <option value="America/Mexico_City">Mexico City (CST)</option>
                            <option value="America/Sao_Paulo">São Paulo (BRT)</option>
                            <option value="America/Argentina/Buenos_Aires">Buenos Aires (ART)</option>
                        </optgroup>
                        <optgroup label="Europe">
                            <option value="Europe/London">London (GMT)</option>
                            <option value="Europe/Paris">Paris (CET)</option>
                            <option value="Europe/Berlin">Berlin (CET)</option>
                            <option value="Europe/Madrid">Madrid (CET)</option>
                            <option value="Europe/Rome">Rome (CET)</option>
                            <option value="Europe/Amsterdam">Amsterdam (CET)</option>
                            <option value="Europe/Stockholm">Stockholm (CET)</option>
                            <option value="Europe/Moscow">Moscow (MSK)</option>
                        </optgroup>
                        <optgroup label="Asia">
                            <option value="Asia/Dubai">Dubai (GST)</option>
                            <option value="Asia/Kolkata">India (IST)</option>
                            <option value="Asia/Singapore">Singapore (SGT)</option>
                            <option value="Asia/Bangkok">Bangkok (ICT)</option>
                            <option value="Asia/Jakarta">Jakarta (WIB)</option>
                            <option value="Asia/Manila">Manila (PHT)</option>
                            <option value="Asia/Hong_Kong">Hong Kong (HKT)</option>
                            <option value="Asia/Shanghai">Shanghai (CST)</option>
                            <option value="Asia/Tokyo">Tokyo (JST)</option>
                            <option value="Asia/Seoul">Seoul (KST)</option>
                        </optgroup>
                        <optgroup label="Oceania">
                            <option value="Australia/Sydney">Sydney (AEDT)</option>
                            <option value="Australia/Melbourne">Melbourne (AEDT)</option>
                            <option value="Pacific/Auckland">Auckland (NZDT)</option>
                        </optgroup>
                        <optgroup label="Africa">
                            <option value="Africa/Cairo">Cairo (EET)</option>
                            <option value="Africa/Johannesburg">Johannesburg (SAST)</option>
                            <option value="Africa/Lagos">Lagos (WAT)</option>
                            <option value="Africa/Nairobi">Nairobi (EAT)</option>
                        </optgroup>
                    </select>
                    <p id="timezone-help" class="error-message" style="color: #6B7280; display: block;">Auto-detected: <span id="detectedTimezone"></span></p>
                </div>

                <div class="field">
                    <label for="language">Preferred Language <span class="required" aria-label="required">*</span></label>
                    <select
                        id="language"
                        name="language"
                        required
                        aria-required="true"
                        aria-label="Select preferred language"
                    >
                        <option value="en">English</option>
                        <option value="id">Bahasa Indonesia</option>
                        <option value="es">Español (Spanish)</option>
                        <option value="fr">Français (French)</option>
                        <option value="de">Deutsch (German)</option>
                        <option value="ja">日本語 (Japanese)</option>
                        <option value="ko">한국어 (Korean)</option>
                        <option value="zh">中文 (Chinese)</option>
                        <option value="ar">العربية (Arabic)</option>
                        <option value="pt">Português (Portuguese)</option>
                    </select>
                </div>
            </div>

            <!-- Step 5: Choose Your Plan -->
            <div class="step" id="step5" role="region" aria-labelledby="step5-title">
                <h2 id="step5-title">Choose your plan</h2>
                <p class="step-description">Start with a 14-day free trial. No credit card required. Cancel anytime.</p>

                <div class="pricing-cards" role="group" aria-label="Subscription plans">
                    <article class="pricing-card" data-plan="basic" aria-labelledby="basic-title">
                        <h3 id="basic-title">Basic</h3>
                        <div class="price" aria-label="399 dollars per month">$399<span style="font-size: 16px; color: #6B7280;">/mo</span></div>
                        <ul aria-label="Basic plan features">
                            <li>3 collections</li>
                            <li>30 chat messages/month</li>
                            <li>20 articles/month</li>
                            <li>8 insights/day</li>
                            <li>Basic analytics</li>
                            <li>Email support</li>
                        </ul>
                        <button onclick="selectPlan('basic')" aria-label="Select Basic plan for 399 dollars per month">Start Free Trial</button>
                    </article>

                    <article class="pricing-card featured" data-plan="premium" aria-labelledby="premium-title">
                        <h3 id="premium-title">Premium <span class="sr-only">Most popular plan</span></h3>
                        <div class="price" aria-label="609 dollars per month">$609<span style="font-size: 16px; color: #6B7280;">/mo</span></div>
                        <ul aria-label="Premium plan features">
                            <li>10 collections</li>
                            <li>100 chat messages/month</li>
                            <li>100 articles/month</li>
                            <li>10 insights/day</li>
                            <li>Advanced analytics</li>
                            <li>Priority support</li>
                            <li>API access</li>
                        </ul>
                        <button onclick="selectPlan('premium')" aria-label="Select Premium plan for 609 dollars per month">Start Free Trial</button>
                    </article>

                    <article class="pricing-card" data-plan="partner" aria-labelledby="partner-title">
                        <h3 id="partner-title">Partner</h3>
                        <div class="price" aria-label="899 dollars per month">$899<span style="font-size: 16px; color: #6B7280;">/mo</span></div>
                        <ul aria-label="Partner plan features">
                            <li>Unlimited collections</li>
                            <li>Unlimited messages</li>
                            <li>500 articles/month</li>
                            <li>12 insights/day</li>
                            <li>White-label options</li>
                            <li>Dedicated account manager</li>
                            <li>Custom integrations</li>
                        </ul>
                        <button onclick="selectPlan('partner')" aria-label="Select Partner plan for 899 dollars per month">Start Free Trial</button>
                    </article>
                </div>

                <div style="text-align: center;">
                    <button class="skip" onclick="selectPlan('basic')" style="background: transparent; border: none; color: #6B7280; text-decoration: underline; cursor: pointer; padding: 12px;">
                        Skip for now (start with Basic)
                    </button>
                </div>
            </div>

            <!-- Success Screen -->
            <div class="success-screen" id="successScreen">
                <div class="success-icon">✓</div>
                <h2>Welcome to GeoVera!</h2>
                <p>Your account is ready. Let's explore your dashboard.</p>
                <button onclick="goToDashboard()" style="max-width: 300px; margin: 0 auto; display: block; padding: 16px; background: #16A34A; color: white; border: none; font-weight: 600; cursor: pointer; text-transform: uppercase;">
                    Go to Dashboard
                </button>
            </div>
        </div>

        <!-- Navigation -->
        <nav class="wizard-nav" role="navigation" aria-label="Onboarding wizard navigation">
            <button
                id="prevBtn"
                onclick="previousStep()"
                style="display: none;"
                aria-label="Go to previous step"
            >
                <span aria-hidden="true">←</span> Previous
            </button>
            <button
                id="skipBtn"
                onclick="skipStep()"
                class="skip"
                aria-label="Skip this step"
            >
                Skip
            </button>
            <button
                id="nextBtn"
                onclick="nextStep()"
                class="primary"
                aria-label="Go to next step"
            >
                Next <span aria-hidden="true">→</span>
            </button>
        </nav>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="env.js"></script>
    <script src="env-loader.js"></script>
    <script>
        console.log('[GeoVera] Onboarding Wizard v2.0 loaded');

        // Configuration
        const ENV_CONFIG = window.getEnvConfig();
        const SUPABASE_URL = ENV_CONFIG.SUPABASE_URL;
        const SUPABASE_ANON_KEY = ENV_CONFIG.SUPABASE_ANON_KEY;
        const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // Session Management
        const accessToken = localStorage.getItem('access_token');
        const user = JSON.parse(localStorage.getItem('user') || '{}');

        if (!accessToken || !user.id) {
            console.error('[GeoVera] No session found');
            window.location.href = '/login.html';
        }

        // State
        let currentStep = 1;
        const totalSteps = 5;
        const formData = {
            brandName: '',
            industry: '',
            website: '',
            logo: null,
            goals: [],
            categories: [],
            platforms: [],
            country: '',
            timezone: '',
            language: 'en',
            plan: 'basic'
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            console.log('[GeoVera] Initializing wizard');
            initializeTimezone();
            loadProgress();
            setupEventListeners();
            setupKeyboardNavigation();
            updateNavigation();
        });

        // Timezone Auto-Detection
        function initializeTimezone() {
            const detected = Intl.DateTimeFormat().resolvedOptions().timeZone;
            document.getElementById('detectedTimezone').textContent = detected;

            // Try to auto-select
            const timezoneSelect = document.getElementById('timezone');
            const option = Array.from(timezoneSelect.options).find(opt => opt.value === detected);
            if (option) {
                timezoneSelect.value = detected;
            }
        }

        // Event Listeners
        function setupEventListeners() {
            // Logo upload preview
            document.getElementById('logoUpload').addEventListener('change', handleLogoUpload);

            // File upload keyboard support
            const fileUploadBtn = document.querySelector('.file-upload');
            fileUploadBtn.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    document.getElementById('logoUpload').click();
                }
            });

            // Category buttons
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    this.classList.toggle('selected');
                    // Update aria-pressed
                    const isPressed = this.classList.contains('selected');
                    this.setAttribute('aria-pressed', isPressed ? 'true' : 'false');
                    saveProgress();
                });
            });

            // Auto-save on input change
            document.querySelectorAll('input, select').forEach(el => {
                el.addEventListener('change', saveProgress);
                el.addEventListener('blur', saveProgress);
            });

            // Checkbox groups
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                cb.addEventListener('change', saveProgress);
            });
        }

        // Keyboard Navigation
        function setupKeyboardNavigation() {
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    const activeElement = document.activeElement;
                    if (activeElement.tagName !== 'TEXTAREA' && activeElement.tagName !== 'BUTTON') {
                        e.preventDefault();
                        nextStep();
                    }
                }

                if (e.key === 'ArrowRight' && e.ctrlKey) {
                    nextStep();
                }

                if (e.key === 'ArrowLeft' && e.ctrlKey) {
                    previousStep();
                }
            });
        }

        // Logo Upload Handler
        function handleLogoUpload(e) {
            const file = e.target.files[0];
            if (file) {
                if (file.size > 5 * 1024 * 1024) {
                    alert('File size must be less than 5MB');
                    return;
                }

                const reader = new FileReader();
                reader.onload = (event) => {
                    const preview = document.getElementById('logoPreview');
                    preview.innerHTML = `<img src="${event.target.result}" alt="Logo preview">`;
                    preview.style.display = 'block';
                    formData.logo = event.target.result;
                    saveProgress();
                };
                reader.readAsDataURL(file);
            }
        }

        // Navigation Functions
        function nextStep() {
            if (!validateStep(currentStep)) {
                return;
            }

            if (currentStep < totalSteps) {
                currentStep++;
                updateStep();
                saveProgress();
                announceStep();
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                updateStep();
                announceStep();
            }
        }

        function skipStep() {
            // Skip current step without validation
            if (currentStep < totalSteps) {
                currentStep++;
                updateStep();
                saveProgress();
                announceStep();
            }
        }

        function goToStep(step) {
            if (step >= 1 && step <= totalSteps) {
                currentStep = step;
                updateStep();
                announceStep();
            }
        }

        // Step Validation
        function validateStep(step) {
            let isValid = true;
            let firstError = null;

            if (step === 1) {
                const brandName = document.getElementById('brandName');
                const industry = document.getElementById('industry');

                if (!brandName.value.trim()) {
                    showError('brandName', 'Please enter your brand name');
                    isValid = false;
                    firstError = brandName;
                } else {
                    hideError('brandName');
                }

                if (!industry.value) {
                    showError('industry', 'Please select an industry');
                    isValid = false;
                    if (!firstError) firstError = industry;
                } else {
                    hideError('industry');
                }
            }

            if (step === 4) {
                const country = document.getElementById('country');
                const timezone = document.getElementById('timezone');

                if (!country.value) {
                    showError('country', 'Please select your country');
                    isValid = false;
                    firstError = country;
                } else {
                    hideError('country');
                }

                if (!timezone.value) {
                    // Auto-select detected timezone if not selected
                    const detected = Intl.DateTimeFormat().resolvedOptions().timeZone;
                    timezone.value = detected;
                    hideError('timezone');
                }
            }

            // Focus first error
            if (firstError) {
                firstError.focus();
            }

            return isValid;
        }

        function showError(fieldId, message) {
            const field = document.getElementById(fieldId);
            const error = document.getElementById(fieldId + '-error');

            field.classList.add('error');
            field.setAttribute('aria-invalid', 'true');
            if (error) {
                error.textContent = message;
                error.classList.add('show');
            }
        }

        function hideError(fieldId) {
            const field = document.getElementById(fieldId);
            const error = document.getElementById(fieldId + '-error');

            field.classList.remove('error');
            field.setAttribute('aria-invalid', 'false');
            if (error) {
                error.textContent = '';
                error.classList.remove('show');
            }
        }

        // Update UI
        function updateStep() {
            // Hide all steps
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active');
            });

            // Show current step
            document.getElementById(`step${currentStep}`).classList.add('active');

            // Update progress bar
            for (let i = 1; i <= totalSteps; i++) {
                const stepEl = document.getElementById(`progress-${i}`);
                const lineEl = document.getElementById(`line-${i}`);

                if (i < currentStep) {
                    stepEl.classList.add('completed');
                    stepEl.classList.remove('active');
                    if (lineEl) lineEl.classList.add('completed');
                } else if (i === currentStep) {
                    stepEl.classList.add('active');
                    stepEl.classList.remove('completed');
                } else {
                    stepEl.classList.remove('active', 'completed');
                    if (lineEl) lineEl.classList.remove('completed');
                }
            }

            // Update progress bar aria
            const progressBar = document.querySelector('.progress-bar');
            progressBar.setAttribute('aria-valuenow', currentStep);

            // Update aria-label with step name
            const stepNames = ['Brand Setup', 'Goals Selection', 'Content Preferences', 'Location & Timezone', 'Choose Your Plan'];
            progressBar.setAttribute('aria-label', `Onboarding progress: step ${currentStep} of ${totalSteps} - ${stepNames[currentStep - 1]}`);

            // Update aria-current on progress steps
            for (let i = 1; i <= totalSteps; i++) {
                const stepEl = document.getElementById(`progress-${i}`);
                if (i === currentStep) {
                    stepEl.setAttribute('aria-current', 'step');
                } else {
                    stepEl.removeAttribute('aria-current');
                }
            }

            updateNavigation();
        }

        function updateNavigation() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const skipBtn = document.getElementById('skipBtn');

            // Show/hide previous button
            if (currentStep === 1) {
                prevBtn.style.display = 'none';
            } else {
                prevBtn.style.display = 'block';
            }

            // Update next button text
            if (currentStep === totalSteps) {
                nextBtn.textContent = 'Complete Setup →';
                nextBtn.onclick = completeOnboarding;
                skipBtn.style.display = 'none';
            } else {
                nextBtn.textContent = 'Next →';
                nextBtn.onclick = nextStep;
                skipBtn.style.display = 'block';
            }
        }

        // Plan Selection
        function selectPlan(plan) {
            formData.plan = plan;
            saveProgress();

            // Highlight selected plan
            document.querySelectorAll('.pricing-card').forEach(card => {
                card.style.opacity = '0.6';
            });
            document.querySelector(`[data-plan="${plan}"]`).style.opacity = '1';

            // Auto-advance after 500ms
            setTimeout(() => {
                completeOnboarding();
            }, 500);
        }

        // Save Progress to localStorage
        function saveProgress() {
            // Collect all data
            formData.brandName = document.getElementById('brandName').value;
            formData.industry = document.getElementById('industry').value;
            formData.website = document.getElementById('website').value;
            formData.country = document.getElementById('country').value;
            formData.timezone = document.getElementById('timezone').value;
            formData.language = document.getElementById('language').value;

            // Goals
            formData.goals = Array.from(document.querySelectorAll('input[name="goals"]:checked'))
                .map(cb => cb.value);

            // Categories
            formData.categories = Array.from(document.querySelectorAll('.category-btn.selected'))
                .map(btn => btn.dataset.category);

            // Platforms
            formData.platforms = Array.from(document.querySelectorAll('input[name="platforms"]:checked'))
                .map(cb => cb.value);

            // Save to localStorage
            const progress = {
                step: currentStep,
                data: formData,
                timestamp: Date.now()
            };

            localStorage.setItem('onboarding_progress', JSON.stringify(progress));
            console.log('[GeoVera] Progress saved');
        }

        // Load Progress from localStorage
        function loadProgress() {
            const saved = localStorage.getItem('onboarding_progress');

            if (!saved) {
                console.log('[GeoVera] No saved progress');
                return;
            }

            try {
                const progress = JSON.parse(saved);

                // Check if saved within last 7 days
                const age = Date.now() - progress.timestamp;
                if (age > 7 * 24 * 60 * 60 * 1000) {
                    console.log('[GeoVera] Progress expired');
                    localStorage.removeItem('onboarding_progress');
                    return;
                }

                // Restore data
                Object.assign(formData, progress.data);

                // Restore form fields
                if (formData.brandName) document.getElementById('brandName').value = formData.brandName;
                if (formData.industry) document.getElementById('industry').value = formData.industry;
                if (formData.website) document.getElementById('website').value = formData.website;
                if (formData.country) document.getElementById('country').value = formData.country;
                if (formData.timezone) document.getElementById('timezone').value = formData.timezone;
                if (formData.language) document.getElementById('language').value = formData.language;

                // Restore logo preview
                if (formData.logo) {
                    const preview = document.getElementById('logoPreview');
                    preview.innerHTML = `<img src="${formData.logo}" alt="Logo preview">`;
                    preview.style.display = 'block';
                }

                // Restore checkboxes
                formData.goals.forEach(goal => {
                    const cb = document.getElementById(`goal-${goal}`);
                    if (cb) cb.checked = true;
                });

                formData.platforms.forEach(platform => {
                    const cb = document.getElementById(`platform-${platform}`);
                    if (cb) cb.checked = true;
                });

                // Restore category buttons
                formData.categories.forEach(cat => {
                    const btn = document.querySelector(`[data-category="${cat}"]`);
                    if (btn) {
                        btn.classList.add('selected');
                        btn.setAttribute('aria-pressed', 'true');
                    }
                });

                // Resume at saved step
                currentStep = progress.step;
                updateStep();

                console.log('[GeoVera] Progress restored');
            } catch (error) {
                console.error('[GeoVera] Error loading progress:', error);
                localStorage.removeItem('onboarding_progress');
            }
        }

        // Complete Onboarding
        async function completeOnboarding() {
            // Final validation
            if (!validateStep(currentStep)) {
                return;
            }

            // Collect final data
            saveProgress();

            const nextBtn = document.getElementById('nextBtn');
            nextBtn.disabled = true;
            nextBtn.innerHTML = '<span class="spinner"></span> Saving...';

            try {
                console.log('[GeoVera] Submitting onboarding data');

                const response = await fetch(`${SUPABASE_URL}/functions/v1/simple-onboarding`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${accessToken}`,
                        'apikey': SUPABASE_ANON_KEY,
                    },
                    body: JSON.stringify({
                        brand_name: formData.brandName,
                        category: formData.industry,
                        country: formData.country,
                        web_url: formData.website || null,
                        description: `Goals: ${formData.goals.join(', ')}`,
                        timezone: formData.timezone,
                        language: formData.language,
                        plan: formData.plan,
                        preferences: {
                            goals: formData.goals,
                            categories: formData.categories,
                            platforms: formData.platforms
                        }
                    })
                });

                const data = await response.json();
                console.log('[GeoVera] Response:', data);

                if (response.ok && data.success) {
                    // Clear saved progress
                    localStorage.removeItem('onboarding_progress');

                    // Show success screen
                    document.querySelector('.wizard-body').innerHTML = `
                        <div class="success-screen show">
                            <div class="success-icon">✓</div>
                            <h2>Welcome to GeoVera!</h2>
                            <p>Your account is ready. Let's explore your dashboard.</p>
                            <button onclick="goToDashboard()" style="max-width: 300px; margin: 0 auto; display: block; padding: 16px; background: #16A34A; color: white; border: none; font-weight: 600; cursor: pointer; text-transform: uppercase; border-radius: 0;">
                                Go to Dashboard →
                            </button>
                        </div>
                    `;

                    // Hide navigation
                    document.querySelector('.wizard-nav').style.display = 'none';

                    // Auto-redirect after 3 seconds
                    setTimeout(() => {
                        goToDashboard();
                    }, 3000);
                } else {
                    alert('Error: ' + (data.error || 'Failed to save. Please try again.'));
                    nextBtn.disabled = false;
                    nextBtn.textContent = 'Complete Setup →';
                }
            } catch (error) {
                console.error('[GeoVera] Error:', error);
                alert('Network error: ' + error.message);
                nextBtn.disabled = false;
                nextBtn.textContent = 'Complete Setup →';
            }
        }

        // Go to Dashboard
        function goToDashboard() {
            window.location.href = 'dashboard.html';
        }

        // Accessibility: Announce step changes
        function announceStep() {
            const stepNames = ['Brand Setup', 'Goals Selection', 'Content Preferences', 'Location & Timezone', 'Choose Your Plan'];
            const announcement = `Step ${currentStep} of ${totalSteps}: ${stepNames[currentStep - 1]}`;
            const announcer = document.createElement('div');
            announcer.setAttribute('role', 'status');
            announcer.setAttribute('aria-live', 'polite');
            announcer.className = 'sr-only';
            announcer.textContent = announcement;
            document.body.appendChild(announcer);

            setTimeout(() => {
                if (document.body.contains(announcer)) {
                    document.body.removeChild(announcer);
                }
            }, 1000);
        }

        console.log('[GeoVera] Wizard ready');
    </script>
</body>
</html>
