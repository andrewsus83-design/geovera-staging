# ğŸ§  Unified Intelligence System - Gemini + Claude Enrichment

**Date**: February 15, 2026
**Strategy**: Multi-AI Enrichment â†’ Unified Data Model â†’ Cross-Feature Utilization
**Goal**: Single crawl â†’ Multiple features enriched with probabilistic intelligence

---

## ğŸ¯ Vision: One Crawl, All Features Enriched

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CRAWL EVENT: example.com article about organic skincare     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DUAL AI ENRICHMENT LAYER                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Gemini Flash 2.0: Fast structural analysis                  â”‚
â”‚ Claude Sonnet 3.5: Deep strategic intelligence              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UNIFIED ENRICHED OUTPUT                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… Brand Mentions (name, context, sentiment, position)      â”‚
â”‚ âœ… Impact Scores (traffic, authority, conversion potential) â”‚
â”‚ âœ… Quality Scores (content, SEO, backlink worthiness)       â”‚
â”‚ âœ… Probability Models (ranking likelihood, conversion rate) â”‚
â”‚ âœ… Opportunity Finds (content gaps, backlink chances)       â”‚
â”‚ âœ… Strategic Insights (competitive threats, partnerships)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CROSS-FEATURE UTILIZATION                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â†’ SEO: Keyword rankings + backlink opportunities            â”‚
â”‚ â†’ GEO: AI citation probability + entity mentions            â”‚
â”‚ â†’ Social: Viral potential + influencer connections          â”‚
â”‚ â†’ Insights: Threat alerts + opportunity detection           â”‚
â”‚ â†’ Radar: Competitor movement + market shifts                â”‚
â”‚ â†’ Hub: Content ideas + trending topics                      â”‚
â”‚ â†’ Content Studio: AI-generated briefs + optimization tips   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¤– Dual AI Architecture: Gemini + Claude

### **Why Two AIs?**

| AI | Strength | Use Case | Cost |
|----|----------|----------|------|
| **Gemini Flash 2.0** | Fast, cheap, structural | Content extraction, entity detection, basic scoring | $0.001/crawl |
| **Claude Sonnet 3.5** | Deep reasoning, strategic | Opportunity analysis, probability models, strategic insights | $0.005/crawl |

**Combined**: $0.006/crawl for comprehensive intelligence

---

## ğŸ“Š Unified Enriched Data Model

```typescript
interface UnifiedEnrichedData {
  // === CORE IDENTIFICATION ===
  url: string;
  domain: string;
  crawled_at: Date;

  // === BRAND INTELLIGENCE ===
  brand_mentions: BrandMention[];
  competitor_mentions: BrandMention[];

  // === IMPACT METRICS ===
  impact_scores: {
    seo_impact: number;           // 1-100: SEO value of this page
    geo_impact: number;           // 1-100: AI citation potential
    social_impact: number;        // 1-100: Social sharing potential
    conversion_impact: number;    // 1-100: Sales conversion likelihood
    overall_impact: number;       // Weighted average
  };

  // === QUALITY SCORES ===
  quality_scores: {
    content_quality: number;      // 1-100: Writing, depth, originality
    seo_strength: number;         // 1-100: Technical SEO optimization
    authority_score: number;      // 1-100: Domain + page authority
    backlink_worthiness: number;  // 1-100: Worth getting backlink from
    user_engagement: number;      // 1-100: Predicted engagement level
  };

  // === PROBABILITY MODELS ===
  probabilities: {
    ranking_probability: number;       // 0-1: Chance we can rank for this
    citation_probability: number;      // 0-1: Chance AI will cite us
    conversion_probability: number;    // 0-1: Visitor â†’ customer rate
    viral_probability: number;         // 0-1: Social sharing likelihood
    partnership_probability: number;   // 0-1: Collaboration success chance
  };

  // === OPPORTUNITY DETECTION ===
  opportunities: Opportunity[];

  // === STRATEGIC INSIGHTS ===
  strategic_insights: {
    competitor_threat_level: "critical" | "high" | "medium" | "low";
    market_positioning: string;
    content_gaps: string[];
    action_priority: number;      // 1-5 (5 = urgent)
    estimated_roi: "high" | "medium" | "low";
  };

  // === SENTIMENT & CONTEXT ===
  sentiment: {
    overall: "very_positive" | "positive" | "neutral" | "negative" | "very_negative";
    brand_sentiment: number;      // -100 to +100
    context: string;              // Why this sentiment?
  };

  // === KEYWORDS & ENTITIES ===
  keywords_detected: KeywordData[];
  entities_detected: Entity[];
  topics_covered: string[];

  // === AI ANALYSIS METADATA ===
  ai_analysis: {
    gemini_version: string;
    claude_version: string;
    confidence_score: number;     // 0-1: How confident is AI?
    analysis_cost_usd: number;
  };
}

interface BrandMention {
  brand_name: string;
  mention_count: number;
  mention_positions: number[];    // Character positions in text
  context_snippets: string[];     // Text around mentions
  sentiment: "positive" | "neutral" | "negative";
  mention_type: "featured" | "comparison" | "passing" | "review";
  prominence_score: number;       // 1-100: How prominently featured?
}

interface Opportunity {
  type: "content_gap" | "backlink" | "partnership" | "guest_post" | "product_review" | "citation" | "ranking";
  title: string;
  description: string;
  probability: number;            // 0-1: Success likelihood
  estimated_impact: number;       // 1-100: Business value
  effort_required: "low" | "medium" | "high";
  priority_score: number;         // Probability Ã— Impact / Effort
  actionable_steps: string[];
  deadline_suggestion: string;    // "within 7 days", "this month", etc.
}

interface KeywordData {
  keyword: string;
  search_intent: "informational" | "commercial" | "transactional" | "navigational";
  difficulty: number;             // 1-100
  opportunity_score: number;      // 1-100 (can we rank for this?)
}

interface Entity {
  name: string;
  type: "person" | "brand" | "product" | "location" | "organization";
  relevance: number;              // 0-1
  sentiment: "positive" | "neutral" | "negative";
}
```

---

## ğŸ”¬ Dual AI Enrichment Process

### **Step 1: Gemini Flash 2.0 - Fast Structural Analysis**

```typescript
class GeminiStructuralAnalyzer {
  async analyzeStructure(html: string, context: CrawlContext): Promise<GeminiAnalysis> {
    const prompt = `You are an SEO content analyzer. Extract structured data from this webpage.

**WEBPAGE CONTENT**:
${this.extractText(html, 8000)}

**EXTRACTION TASKS**:

1. **Brand Mentions**:
   - Find ALL brand names mentioned (including "${context.brand_name}")
   - For each brand: name, count, positions in text, context snippets
   - Sentiment per mention (positive/neutral/negative)
   - Mention type (featured/comparison/passing/review)

2. **Quality Scores** (1-100 each):
   - Content quality (depth, originality, value)
   - SEO strength (optimization level)
   - Authority signals (trust indicators)
   - Backlink worthiness (value of getting link)
   - User engagement potential

3. **Keywords Detected**:
   - Top 20 keywords this page targets
   - Search intent (informational/commercial/transactional/navigational)
   - Difficulty estimate (1-100)

4. **Entities Detected**:
   - People, brands, products, locations, organizations
   - Relevance to "${context.brand_category}"
   - Sentiment per entity

5. **Topics Covered**:
   - Main topics discussed
   - Content depth per topic

OUTPUT JSON:
{
  "brand_mentions": [...],
  "quality_scores": {...},
  "keywords_detected": [...],
  "entities_detected": [...],
  "topics_covered": [...]
}`;

    const response = await this.callGemini(prompt);
    return this.parseGeminiResponse(response);
  }

  private async callGemini(prompt: string): Promise<string> {
    const response = await fetch(
      "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent",
      {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "x-goog-api-key": this.apiKey
        },
        body: JSON.stringify({
          contents: [{ parts: [{ text: prompt }] }],
          generationConfig: {
            temperature: 0.2,
            maxOutputTokens: 4096
          }
        })
      }
    );

    const data = await response.json();
    return data.candidates?.[0]?.content?.parts?.[0]?.text || "";
  }
}
```

**Cost**: ~$0.001 per page (fast, cheap)

---

### **Step 2: Claude Sonnet 3.5 - Deep Strategic Intelligence**

```typescript
class ClaudeStrategicAnalyzer {
  async analyzeStrategy(
    html: string,
    geminiData: GeminiAnalysis,
    context: CrawlContext
  ): Promise<ClaudeAnalysis> {
    const prompt = `You are a strategic business intelligence analyst. Analyze this webpage and provide probabilistic insights and opportunity detection.

**CONTEXT**:
- Our brand: ${context.brand_name} (${context.brand_category})
- Our position: ${context.market_position}
- Our goals: ${context.business_goals.join(", ")}

**GEMINI'S STRUCTURAL ANALYSIS**:
${JSON.stringify(geminiData, null, 2)}

**WEBPAGE CONTENT** (sample):
${this.extractText(html, 5000)}

**YOUR STRATEGIC ANALYSIS**:

1. **Impact Scores** (1-100 each):
   - SEO Impact: How valuable is this page for traditional SEO?
   - GEO Impact: Will AI platforms cite content like this?
   - Social Impact: Social sharing and viral potential?
   - Conversion Impact: If we rank here, what's conversion likelihood?

   For each, explain WHY (2-3 sentences).

2. **Probability Models** (0.0 to 1.0):
   - Ranking Probability: Can we realistically rank for keywords on this page?
     * Consider: domain authority, content quality, competition
   - Citation Probability: Will ChatGPT/Gemini/Claude cite us if we create similar content?
     * Consider: authority signals, citation patterns
   - Conversion Probability: If user finds us here, will they convert?
     * Consider: search intent, user journey, friction points
   - Viral Probability: Will this content type go viral on social?
     * Consider: format, emotional appeal, shareability
   - Partnership Probability: Can we collaborate with this site?
     * Consider: site type, alignment, outreach success factors

   For each probability, provide:
   - Score (0.0-1.0)
   - Confidence level (low/medium/high)
   - Key factors influencing probability
   - Recommended actions to increase probability

3. **Opportunity Detection**:
   Find 3-5 specific opportunities from this analysis:

   Content Gap Example:
   {
     "type": "content_gap",
     "title": "Create comprehensive guide on [topic]",
     "description": "This page ranks well but lacks depth on [specific subtopic]. We can create superior content covering [XYZ].",
     "probability": 0.75,
     "estimated_impact": 85,
     "effort_required": "medium",
     "actionable_steps": [
       "Research [subtopic] in depth",
       "Interview 3 experts",
       "Create 2500-word guide with visuals",
       "Optimize for keywords: [list]"
     ],
     "deadline_suggestion": "within 14 days (trending topic)"
   }

   Include opportunities like:
   - Content gaps we can fill
   - Backlink opportunities (guest post, resource page, etc.)
   - Partnership possibilities
   - Ranking opportunities (low-competition keywords)
   - Citation opportunities (become AI-referenced source)

4. **Strategic Insights**:
   - Competitor Threat Level: How dangerous is this competitor/content?
   - Market Positioning: Where does this sit in the market landscape?
   - Content Gaps: What's missing that users need?
   - Action Priority: 1-5 urgency
   - Estimated ROI: high/medium/low

5. **Sentiment Deep Dive**:
   - Overall sentiment (-100 to +100)
   - Why this sentiment? (context)
   - Brand perception insights
   - Competitor sentiment comparison

OUTPUT JSON:
{
  "impact_scores": {...},
  "probabilities": {...},
  "opportunities": [...],
  "strategic_insights": {...},
  "sentiment": {...}
}`;

    const response = await this.callClaude(prompt);
    return this.parseClaudeResponse(response);
  }

  private async callClaude(prompt: string): Promise<string> {
    const response = await fetch("https://api.anthropic.com/v1/messages", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "x-api-key": this.apiKey,
        "anthropic-version": "2023-06-01"
      },
      body: JSON.stringify({
        model: "claude-3-5-sonnet-20241022",
        max_tokens: 8192,
        temperature: 0.3,
        messages: [{
          role: "user",
          content: prompt
        }]
      })
    });

    const data = await response.json();
    return data.content?.[0]?.text || "";
  }
}
```

**Cost**: ~$0.005 per page (deep, strategic)

**Total Enrichment Cost**: $0.001 (Gemini) + $0.005 (Claude) = **$0.006 per page**

---

## ğŸ”„ Cross-Feature Utilization

### **1. SEO Dashboard**

```typescript
// Utilize enriched data for SEO insights
const seoInsights = {
  keyword_opportunities: enrichedData.opportunities
    .filter(o => o.type === "ranking")
    .sort((a, b) => b.priority_score - a.priority_score),

  backlink_targets: enrichedData.opportunities
    .filter(o => o.type === "backlink")
    .map(o => ({
      url: enrichedData.url,
      worthiness: enrichedData.quality_scores.backlink_worthiness,
      probability: o.probability,
      outreach_strategy: o.actionable_steps
    })),

  competitor_alerts: enrichedData.strategic_insights.competitor_threat_level === "critical"
    ? {
        threat: enrichedData.competitor_mentions,
        action_required: true,
        priority: 5
      }
    : null
};
```

**SEO Features Enhanced:**
- âœ… Backlink opportunities with success probability
- âœ… Keyword ranking likelihood predictions
- âœ… Competitor threat alerts (real-time)
- âœ… Content gap analysis for SEO

---

### **2. GEO (Generative Engine Optimization)**

```typescript
// Predict AI citation probability
const geoInsights = {
  citation_probability: enrichedData.probabilities.citation_probability,

  optimization_strategy: enrichedData.opportunities
    .filter(o => o.type === "citation")
    .map(o => ({
      opportunity: o.title,
      why_ai_will_cite: o.description,
      steps_to_increase: o.actionable_steps,
      estimated_impact: o.estimated_impact
    })),

  authority_signals: {
    current_score: enrichedData.quality_scores.authority_score,
    needed_for_citation: 75, // Threshold for AI citation
    gap: Math.max(0, 75 - enrichedData.quality_scores.authority_score),
    recommendations: enrichedData.strategic_insights.content_gaps
  },

  entity_mentions: enrichedData.entities_detected
    .filter(e => e.type === "brand")
    .map(e => ({
      entity: e.name,
      sentiment: e.sentiment,
      relevance: e.relevance,
      citation_context: enrichedData.brand_mentions.find(m => m.brand_name === e.name)?.context_snippets
    }))
};
```

**GEO Features Enhanced:**
- âœ… AI citation probability models
- âœ… Entity mention tracking (how AI sees brands)
- âœ… Authority gap analysis (what's needed for AI citation)
- âœ… Optimization strategies for AI visibility

---

### **3. Social Search**

```typescript
// Predict viral potential
const socialInsights = {
  viral_probability: enrichedData.probabilities.viral_probability,

  content_format_recommendations: enrichedData.opportunities
    .filter(o => o.type === "content_gap")
    .map(o => ({
      format: this.determineOptimalFormat(o, enrichedData),
      platform: this.determineBestPlatform(o, enrichedData),
      hook: this.generateHook(o),
      estimated_reach: this.estimateReach(enrichedData.impact_scores.social_impact)
    })),

  influencer_opportunities: enrichedData.entities_detected
    .filter(e => e.type === "person" && e.relevance > 0.7)
    .map(e => ({
      influencer: e.name,
      partnership_probability: enrichedData.probabilities.partnership_probability,
      alignment_score: e.relevance * 100,
      sentiment: e.sentiment
    })),

  trending_topics: enrichedData.topics_covered
    .filter(topic => this.isTrending(topic))
    .map(topic => ({
      topic,
      viral_score: enrichedData.impact_scores.social_impact,
      content_angle: this.suggestContentAngle(topic, enrichedData)
    }))
};
```

**Social Features Enhanced:**
- âœ… Viral probability predictions
- âœ… Influencer collaboration opportunities
- âœ… Trending topic detection
- âœ… Optimal format recommendations (Reel, TikTok, YouTube)

---

### **4. Insights Dashboard**

```typescript
// Intelligent alerts and opportunities
const insights = {
  opportunities: enrichedData.opportunities
    .sort((a, b) => b.priority_score - a.priority_score)
    .slice(0, 10), // Top 10 opportunities

  threat_alerts: enrichedData.strategic_insights.competitor_threat_level !== "low"
    ? {
        level: enrichedData.strategic_insights.competitor_threat_level,
        competitors: enrichedData.competitor_mentions,
        action_required: enrichedData.strategic_insights.action_priority >= 4,
        recommendations: enrichedData.opportunities.filter(o =>
          o.title.toLowerCase().includes("competitor")
        )
      }
    : null,

  sentiment_shifts: {
    current: enrichedData.sentiment.overall,
    score: enrichedData.sentiment.brand_sentiment,
    context: enrichedData.sentiment.context,
    alert_if_negative: enrichedData.sentiment.brand_sentiment < -30
  },

  quick_wins: enrichedData.opportunities
    .filter(o => o.effort_required === "low" && o.probability > 0.6)
    .slice(0, 5) // Top 5 quick wins
};
```

**Insights Features Enhanced:**
- âœ… Prioritized opportunities (probability Ã— impact)
- âœ… Threat level alerts (competitor movement)
- âœ… Sentiment shift detection
- âœ… Quick win identification (low effort, high probability)

---

### **5. Radar (Competitive Intelligence)**

```typescript
// Market movement tracking
const radarInsights = {
  competitor_movements: enrichedData.competitor_mentions.map(comp => ({
    competitor: comp.brand_name,
    activity: comp.mention_type,
    threat_level: enrichedData.strategic_insights.competitor_threat_level,
    market_share_estimate: this.estimateMarketShare(comp, enrichedData),
    trending: comp.prominence_score > 75
  })),

  market_positioning: {
    our_position: this.calculatePosition(context.brand_name, enrichedData),
    competitor_positions: enrichedData.competitor_mentions.map(comp => ({
      brand: comp.brand_name,
      position: this.calculatePosition(comp.brand_name, enrichedData)
    })),
    gap_analysis: enrichedData.strategic_insights.content_gaps
  },

  emerging_trends: enrichedData.topics_covered
    .filter(topic => this.isEmerging(topic))
    .map(topic => ({
      topic,
      growth_rate: this.estimateGrowth(topic),
      opportunity_window: "3-6 months",
      first_mover_advantage: true
    }))
};
```

**Radar Features Enhanced:**
- âœ… Real-time competitor activity tracking
- âœ… Market positioning analysis
- âœ… Emerging trend detection
- âœ… First-mover opportunity alerts

---

### **6. Hub (Content Intelligence)**

```typescript
// Content strategy enrichment
const hubInsights = {
  trending_topics: enrichedData.topics_covered
    .sort((a, b) =>
      this.getTrendScore(b, enrichedData) - this.getTrendScore(a, enrichedData)
    ),

  content_gaps: enrichedData.opportunities
    .filter(o => o.type === "content_gap")
    .map(gap => ({
      gap: gap.title,
      keywords: this.extractKeywords(gap, enrichedData),
      suggested_format: this.suggestFormat(gap),
      estimated_traffic: this.estimateTraffic(gap, enrichedData),
      probability_of_ranking: gap.probability
    })),

  successful_content_patterns: {
    what_works: this.analyzeSuccessPatterns(enrichedData),
    content_length: this.extractText(html).split(/\s+/).length,
    optimal_length: this.recommendLength(enrichedData),
    engagement_signals: enrichedData.quality_scores.user_engagement
  }
};
```

**Hub Features Enhanced:**
- âœ… Trending topics with growth predictions
- âœ… Content gap analysis with ranking probability
- âœ… Success pattern detection
- âœ… Optimal content format recommendations

---

### **7. Content Studio (AI Generation)**

```typescript
// AI-powered content briefs
const contentBriefs = enrichedData.opportunities
  .filter(o => o.type === "content_gap")
  .map(opportunity => ({
    title: opportunity.title,
    objective: opportunity.description,

    // SEO optimization
    target_keywords: enrichedData.keywords_detected
      .filter(k => k.opportunity_score > 70)
      .slice(0, 5),
    ranking_probability: opportunity.probability,

    // Content strategy
    recommended_length: this.recommendLength(enrichedData),
    content_angle: this.suggestAngle(opportunity, enrichedData),
    tone: this.suggestTone(enrichedData.sentiment),

    // Competitive intelligence
    competitor_content: enrichedData.competitor_mentions
      .map(c => c.context_snippets)
      .flat(),
    differentiation_strategy: this.suggestDifferentiation(enrichedData),

    // Distribution strategy
    best_platforms: this.recommendPlatforms(enrichedData.impact_scores),
    viral_potential: enrichedData.probabilities.viral_probability,

    // Action plan
    steps: opportunity.actionable_steps,
    deadline: opportunity.deadline_suggestion,
    estimated_roi: enrichedData.strategic_insights.estimated_roi
  }));
```

**Content Studio Features Enhanced:**
- âœ… AI-generated content briefs
- âœ… Keyword optimization with ranking probability
- âœ… Competitive differentiation strategies
- âœ… Platform-specific recommendations
- âœ… ROI estimates

---

## ğŸ“Š Probability & Opportunity Models

### **Ranking Probability Model**

```typescript
function calculateRankingProbability(
  page: EnrichedData,
  keyword: KeywordData,
  ourAuthority: number
): number {
  // Factors influencing ranking probability
  const factors = {
    authorityGap: Math.max(0, page.quality_scores.authority_score - ourAuthority) / 100,
    contentQuality: page.quality_scores.content_quality / 100,
    keywordDifficulty: keyword.difficulty / 100,
    competitionLevel: page.competitor_mentions.length / 10, // Normalized
    ourContentQuality: 0.8, // Assume we can create quality content
  };

  // Weighted probability calculation
  const probability =
    (1 - factors.authorityGap * 0.3) *      // Authority gap: 30% weight
    (factors.ourContentQuality * 0.3) *     // Our content quality: 30%
    (1 - factors.keywordDifficulty * 0.2) * // Keyword difficulty: 20%
    (1 - factors.competitionLevel * 0.2);   // Competition: 20%

  return Math.max(0, Math.min(1, probability));
}
```

### **Citation Probability Model**

```typescript
function calculateCitationProbability(
  page: EnrichedData,
  ourBrand: BrandProfile
): number {
  // AI platforms cite based on:
  const factors = {
    authorityScore: page.quality_scores.authority_score / 100,
    citationPatterns: page.brand_mentions.filter(m =>
      m.mention_type === "featured" || m.mention_type === "review"
    ).length / 5, // Normalized
    contentDepth: Math.min(1, page.topics_covered.length / 10),
    freshness: Math.max(0, 1 - (Date.now() - page.crawled_at.getTime()) / (30 * 24 * 60 * 60 * 1000)),
    structuredData: page.quality_scores.seo_strength / 100,
  };

  const probability =
    factors.authorityScore * 0.4 +
    factors.citationPatterns * 0.25 +
    factors.contentDepth * 0.2 +
    factors.freshness * 0.1 +
    factors.structuredData * 0.05;

  return Math.max(0, Math.min(1, probability));
}
```

### **Conversion Probability Model**

```typescript
function calculateConversionProbability(
  page: EnrichedData,
  keyword: KeywordData
): number {
  // Conversion depends on:
  const factors = {
    searchIntent: keyword.search_intent === "transactional" ? 1.0 :
                  keyword.search_intent === "commercial" ? 0.7 :
                  keyword.search_intent === "informational" ? 0.3 : 0.1,

    userEngagement: page.quality_scores.user_engagement / 100,

    trustSignals: page.quality_scores.authority_score / 100,

    brandSentiment: Math.max(0, (page.sentiment.brand_sentiment + 100) / 200),

    conversionFriction: 1 - (page.competitor_mentions.length / 10) // Less competition = higher conversion
  };

  const probability =
    factors.searchIntent * 0.35 +
    factors.userEngagement * 0.25 +
    factors.trustSignals * 0.2 +
    factors.brandSentiment * 0.1 +
    factors.conversionFriction * 0.1;

  return Math.max(0, Math.min(1, probability));
}
```

### **Opportunity Priority Score**

```typescript
function calculateOpportunityPriority(opportunity: Opportunity): number {
  const effortMultiplier = {
    low: 1.5,
    medium: 1.0,
    high: 0.6
  };

  // Priority = (Probability Ã— Impact) / Effort
  const priorityScore =
    (opportunity.probability * opportunity.estimated_impact * effortMultiplier[opportunity.effort_required]) / 100;

  return Math.round(priorityScore * 100);
}
```

---

## ğŸ’° Complete Cost Analysis

### **Per Crawl Cost (Dual AI Enrichment):**

```
Gemini Flash 2.0: $0.001 (structural analysis)
Claude Sonnet 3.5: $0.005 (strategic intelligence)
Total per crawl: $0.006
```

### **Monthly Cost by Tier:**

**Premium Tier (100 keywords + 100 backlinks = ~200 crawls/month):**

```
Initial Discovery (Perplexity): $0.29
Initial Enrichment (200 sites): 200 Ã— $0.006 = $1.20
Daily Smart Crawl (10 sites/day): 10 Ã— 30 Ã— 0.6 (cache hit) Ã— $0.006 = $1.08
Weekly Deep Crawl (50 sites/week): 50 Ã— 4 Ã— 0.5 (cache hit) Ã— $0.006 = $0.60

SEO Enrichment Total: $0.29 + $1.20 + $1.08 + $0.60 = $3.17/month
```

**Complete Monthly Cost:**

| Tier | 500QA | Daily Research | SEO (Dual AI) | **Total** |
|------|-------|---------------|--------------|-----------|
| **Basic** | $0.35 | $3.00 | $1.60 | **$4.95** |
| **Premium** | $0.35 | $4.50 | $3.17 | **$8.02** |
| **Partner** | $0.35 | $7.50 | $5.20 | **$13.05** |

**vs Original Plan (without enrichment):**

| Tier | Original | With Dual AI | Increase | Value Gained |
|------|----------|-------------|----------|--------------|
| Basic | $3.65 | $4.95 | +$1.30 | ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§  |
| Premium | $5.45 | $8.02 | +$2.57 | ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§  |
| Partner | $8.85 | $13.05 | +$4.20 | ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§  |

---

## ğŸ¯ What You Get (Output Example)

```json
{
  "url": "https://beauty-insider.com/best-organic-skincare-2026",
  "domain": "beauty-insider.com",

  "brand_mentions": [
    {
      "brand_name": "OurBrand",
      "mention_count": 3,
      "mention_positions": [1240, 3580, 5920],
      "context_snippets": [
        "...while OurBrand offers premium organic formulations at competitive prices...",
        "...OurBrand's commitment to sustainability sets them apart...",
        "...Top 5 recommendation: OurBrand Natural Serum (4.8/5 stars)..."
      ],
      "sentiment": "positive",
      "mention_type": "featured",
      "prominence_score": 85
    }
  ],

  "impact_scores": {
    "seo_impact": 88,
    "geo_impact": 92,
    "social_impact": 76,
    "conversion_impact": 82,
    "overall_impact": 85
  },

  "quality_scores": {
    "content_quality": 91,
    "seo_strength": 78,
    "authority_score": 85,
    "backlink_worthiness": 94,
    "user_engagement": 87
  },

  "probabilities": {
    "ranking_probability": 0.68,
    "citation_probability": 0.82,
    "conversion_probability": 0.54,
    "viral_probability": 0.41,
    "partnership_probability": 0.75
  },

  "opportunities": [
    {
      "type": "backlink",
      "title": "Get featured in Beauty Insider's Top 10 List",
      "description": "This high-authority site (DR 85) regularly updates their best organic skincare lists. We're mentioned positively but not in top 3. Reach out with product samples.",
      "probability": 0.75,
      "estimated_impact": 92,
      "effort_required": "medium",
      "priority_score": 69,
      "actionable_steps": [
        "Send product sample pack to editor Sarah Johnson",
        "Include new sustainability report",
        "Offer exclusive discount code for readers",
        "Follow up in 2 weeks"
      ],
      "deadline_suggestion": "within 14 days (list updated monthly)"
    },
    {
      "type": "citation",
      "title": "Become AI-cited authority on 'sustainable skincare packaging'",
      "description": "AI platforms cite this article when asked about eco-friendly packaging. Create authoritative guide on sustainable packaging innovations to compete for citations.",
      "probability": 0.82,
      "estimated_impact": 88,
      "effort_required": "high",
      "priority_score": 60,
      "actionable_steps": [
        "Research latest packaging innovations (2 days)",
        "Interview 3 sustainability experts",
        "Create 3000-word comprehensive guide",
        "Add technical specs and comparisons",
        "Optimize with schema markup for AI crawlers",
        "Promote on LinkedIn and industry forums"
      ],
      "deadline_suggestion": "within 30 days (trending topic window)"
    },
    {
      "type": "content_gap",
      "title": "Create 'Organic vs Natural Skincare' comparison",
      "description": "Article mentions debate but doesn't deep-dive. High search volume, low competition. Quick win opportunity.",
      "probability": 0.88,
      "estimated_impact": 76,
      "effort_required": "low",
      "priority_score": 100,
      "actionable_steps": [
        "Write 1500-word comparison article",
        "Create visual comparison chart",
        "Target keywords: 'organic vs natural skincare' (difficulty: 45)",
        "Add FAQ section for featured snippet",
        "Share on Pinterest and Instagram"
      ],
      "deadline_suggestion": "within 7 days (quick win)"
    }
  ],

  "strategic_insights": {
    "competitor_threat_level": "medium",
    "market_positioning": "We're positioned as premium-quality, mid-price option. Competitors focus on either ultra-premium or budget segments.",
    "content_gaps": [
      "Lack of video tutorials (YouTube opportunity)",
      "No ingredient transparency page (trust gap)",
      "Missing customer success stories (social proof)"
    ],
    "action_priority": 4,
    "estimated_roi": "high"
  },

  "sentiment": {
    "overall": "positive",
    "brand_sentiment": 78,
    "context": "Article praises our sustainability commitment and product quality. Minor concern about pricing vs budget alternatives."
  }
}
```

---

## âœ… Final Recommendation

### **APPROVED: Dual AI Enrichment (Gemini + Claude)**

**Architecture:**
1. âœ… Perplexity: Discover 5000 sites ($0.29/month)
2. âœ… Gemini Flash: Fast structural analysis ($0.001/page)
3. âœ… Claude Sonnet: Deep strategic intelligence ($0.005/page)
4. âœ… Unified data model â†’ All features enriched

**Cross-Feature Utilization:**
- âœ… SEO: Ranking probability, backlink opportunities
- âœ… GEO: Citation probability, entity mentions
- âœ… Social: Viral probability, influencer matches
- âœ… Insights: Threat alerts, opportunity prioritization
- âœ… Radar: Competitor tracking, market positioning
- âœ… Hub: Trending topics, content gaps
- âœ… Content Studio: AI-generated briefs with ROI estimates

**Probability Models:**
- âœ… Ranking probability (can we rank?)
- âœ… Citation probability (will AI cite us?)
- âœ… Conversion probability (will users buy?)
- âœ… Viral probability (will content spread?)
- âœ… Partnership probability (collaboration success?)

**Total Cost:**
- Basic: $4.95/month
- Premium: $8.02/month
- Partner: $13.05/month

**Value:** Single crawl â†’ 7 features enriched with probabilistic intelligence ğŸš€

---

**Status**: âœ… **UNIFIED INTELLIGENCE APPROVED**
**Next**: Build dual AI enrichment pipeline
**ROI**: Exponential (one crawl enriches entire platform)

ğŸ§  **GAME-CHANGING STRATEGY!**
